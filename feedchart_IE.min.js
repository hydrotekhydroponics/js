"use strict";function _instanceof(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](t):t instanceof e}function _classCallCheck(t,e){if(!_instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),t}var fc_formID="#hydrotekFC",LANG=document.documentElement.lang,fc_gallons=Math.ceil(3.78541178),fc_grow_week_max=8,fc_bloom_week_max=12,fc_reservoir_min_max={min:1,max:9999},reservoirSize=100,fc_drop2ml=.05/4.5,_cieNames=["Cyco","Hesi","General Hydroponics","Black Flower","Remo","Optimum Hydroponix"],_cycoCharts=["Basic","Advanced","Commercial","Basic Soil","Deep Water"],_hesiCharts=["Hydro","Coco","Soil"],_generalhydroponicsCharts=["Flora Series Recirculating - Simple","Flora Series Recirculating - Expert","Flora Series Drain to Waste- Simple","Flora Series Drain to Waste - Expert","Floranova Recirculating - Simple","Floranova Recirculating - Expert","Floranova Drain to Waste- Simple","Floranova Drain to Waste - Expert","Floraduo Recirculating - Simple","Floraduo Recirculating - Expert","Floraduo Drain to Waste - Simple","Floraduo Drain to Waste - Expert","Maxi Series Recirculating - Simple","Maxi Series Recirculating - Expert","Maxi Series Drain to Waste - Simple","Maxi Series Drain to Waste - Expert","Cocotek Premium Nutrient Feeding - Simple","Cocotek Premium Nutrient Feeding - Expert","Biothrive Drain to Waste - Simple","Biothrive Drain to Waste - Expert"],_blackflowerCharts=["Basic"],_optimumhydroponixCharts=["Basic"],_remoCharts=["Basic"];if("fr"===LANG)var selectOptionText="Faites une sÃ©lection",literText="Litres",gallonText="Gallons",prodGrowStageText="Produits (stade de croissance)",prodBloomStageText="Produits (stade de la floraison)",weekText="Semaine ",theadTotalText1="Total requis par rÃ©servoir de ",spaceText="&nbsp;",theadTotalText2=" pour ",theadTotalText3="</span> lot(s) par semaine",flushText="R<BR />I<BR />N<BR />Ã‡<BR />A<BR />G<BR />E";else var selectOptionText="Make your selection",literText="Liters",gallonText="Gallons",prodGrowStageText="Products (Grow stage)",prodBloomStageText="Products (Bloom stage)",weekText="Week ",theadTotalText1="Total needed per ",spaceText="&nbsp;",theadTotalText2=" reservoir for ",theadTotalText3="</span> batch(es) per week",flushText="F<br />L<br />U<br />S<br />H";var selectedCompany="",selectedChart="",currentChart="",etable="</table>",thead_reset="<thead>",ethead="</thead>",tbody_reset="<tbody>",etbody="</tbody>",tfoot_reset="<tfoot>",etfoot="</tfoot>",tr="<tr>",etr="</tr>",th="<th>",eth="</th>",td="<td>",etd="</td>",tdfooter="<td>",o;function calString(t,e,o){var r,a,s,n;for(r="add"===e?1:0,a=t.split("-"),s=0,n=[0,0],s=0;s<a.length;s++)n[s]=1===r?100*Math.round(Number(n[s],10)+Number(a[s],10))/100:Math.round(Number(a[s],10)*Number(e)*100)/100;if("undefined"!==o)for(s=0;s<n.length;s++)n[s]>=1e3?n[s]=Math.round(n[s]/1e3*100)/100+"L":n[s]=Math.round(100*n[s])/100+"ml";return n}function populateSelectBox(t,e,o){var r="",a="",s="";""===(o=o||"")?r='<select id="'+t+'"><option value="" selected="selected">-- '+selectOptionText+" --</option>":(r='<select id="'+t+'"><option value="">-- '+selectOptionText+" --</option>",s=' selected="selected"'),$.each(e,function(t,e){a+=o===e?'<option value="'+e+'"'+s+">"+e+"</option>":'<option value="'+e+'">'+e+"</option>"}),$("#"+t).replaceWith(r+a+"</select>")}function sortArray(t){return t.sort(function(t,e){return t.toLowerCase()<e.toLowerCase()?-1:t.toLowerCase()>e.toLowerCase()?1:0})}function calcMinMax(t,e){for(var o=[];t<e+1;)o.push(t++);return o}function getChart(){var t=$("#company_names").val(),e=$("#company_charts").val(),r=$("#fc_units").val(),a=$("#fc_grow_weeks").val(),s=$("#fc_bloom_weeks").val(),n=$("#batches").val(),l=$("#reservoirs").val();if(o=!1,$("#hydrotekFC select,#hydrotekFC input").each(function(){return""===$(this).val()||null===$(this).val()?(o=!1,this.focus(),this.style.boxShadow="0px 0px 10px red",this.style.border="solid",this.style.borderWidth="3px",this.style.borderColor="red",!1):(this.style.boxShadow="0px 0px 0px transparent",this.style.borderWidth="1px",this.style.borderColor="#ccc",o=!0)}),!0===o){var i=new Chart(t,e,r,a,s,n,l);i.head(),i.grow(),i.bloom()}}$(function(){populateSelectBox("company_names",sortArray(_cieNames)),populateSelectBox("fc_grow_weeks",calcMinMax(1,fc_grow_week_max),fc_grow_week_max/2),populateSelectBox("fc_bloom_weeks",calcMinMax(1,fc_bloom_week_max),fc_bloom_week_max/2),$("#feed_chart_form input[type=number]").spinner(),$(fc_formID).on("change","#company_names",function(){selectedCompany=this.value;var chart_name=eval("_"+this.value.toLowerCase().replace(/-|\s/g,"")+"Charts");populateSelectBox("company_charts",sortArray(chart_name))}),$(fc_formID).on("change","#company_names",function(){document.getElementById("talbeHeader").innerHTML="",document.getElementById("growTableContent").innerHTML="",document.getElementById("bloomTableContent").innerHTML=""}),$(fc_formID).on("change","#fc_units",function(){var t=Number($("#fc_units").val());document.getElementById("resUnit").innerHTML=0===t?literText:gallonText}),$(fc_formID).on("change","#company_charts, #fc_units, .ui-spinner input, #fc_bloom_weeks, #fc_grow_weeks",function(){getChart()}),$("#make_chart, .ui-spinner-button").on("click",function(){getChart()})});var Chart=function(){function Chart(company,chart_name,unit,growweeks,bloomweeks,batches,resSize){_classCallCheck(this,Chart),this.company=company,this.chart_name=chart_name,this.chart=eval(this.company.toLowerCase().replace(/-|\s/g,"")+"_"+this.chart_name.toLowerCase().replace(/-|\s/g,"")),this.unit=unit,this.growweeks=growweeks,this.bloomweeks=bloomweeks,this.batches=batches,"g"===document.getElementById("resUnit").innerHTML.charAt(0).toLowerCase()?this.resUnit="gal":this.resUnit="L",this.resSize=resSize}return _createClass(Chart,[{key:"head",value:function(){var t="";t+='<h1 style="margin-bottom: 1rem">'+this.company+" - "+this.chart_name+"</h1>",t+="<p>"+this.chart.description+"</p>",document.getElementById("talbeHeader").innerHTML=t}},{key:"grow",value:function grow(){var nProduct=Object.keys(this.chart.grow_products[0]).length+2,nWeeks=parseInt(this.growweeks),flush=this.chart.grow_flush,flushAtEnd=0,unit=this.unit,resUnit=this.resUnit,resSize=Number(this.resSize),batchesperweek=this.batches,colspancounter=1,tds500=0,tds700=0,table='<table class="chart grow" border="1">',thead=thead_reset,tbody=tbody_reset,tbodyTmp1="",tbodyTmp2="",tfoot=tfoot_reset,z=0,resTotal=[0,0],galTotal=[0,0],totalUnit="ml";if(thead+=tr+th+prodGrowStageText+eth,1===flush.length)for(var i=1;i<=nWeeks;i++)colspancounter++,thead+=th+weekText+i+eth,i===nWeeks&&0!==flush[0]&&(colspancounter++,thead+='<th class="flush">&nbsp;'+eth);else $.each(this.chart.grow_flush,function(t,e){var o=t+1;o<=nWeeks&&(colspancounter++,thead+=th+weekText+o+eth,1===flush[o-1]&&flush.length>1&&(colspancounter++,thead+='<th class="flush">&nbsp;'+eth))});thead+='<th class="rowTotal" style="font-weight:normal">'+theadTotalText1+resSize+spaceText+resUnit+theadTotalText2+batchesperweek+theadTotalText3+eth,thead+=etr,thead+=ethead,tdfooter=colspancounter>1?'<td colspan="'+eval(colspancounter+1)+'">':tdfooter,$.each(this.chart.grow_products[0],function(t,e){var o=0,r=1,a=[0,0];z++,"E.C."!==t&&"PH"!==t?tbody+=tr+td+t+etd:"E.C."===t?(tbody+='<tr class="phcol">'+td+t+etd,tbodyTmp1='<tr class="phcol">'+td+"T.D.S. 500"+etd,tbodyTmp2='<tr class="phcol">'+td+"T.D.S. 700"+etd):tbody+='<tr class="phcol">'+td+t+etd,$.each(e,function(e,s){var n=e+1;if(n<=nWeeks){var l;if("E.C."!==t&&"PH"!==t)if(unit>0&&(s="string"==typeof s?calString(s.replace(/[a-zA-Z]+/g,""),unit,resSize).join("-"):Math.round(s*unit*resSize*100)/100),"string"==typeof s?(l=calString(s.replace(/[a-zA-Z]+/g,""),resSize).join("-"),totalUnit=""):(l=s*resSize)>=1e3?(l=Math.round(l/1e3*100)/100,totalUnit="L"):(l=Math.round(100*l)/100,totalUnit="ml"),tbody+=td+l+totalUnit+etd,"string"==typeof s){for(var i=s.replace(/[a-zA-Z]+/g,"").split("-"),d=0;d<i.length;d++)i[d]=Number(i[d],10)*resSize,a[d]=i[d]+a[d],a[d]=Math.round(100*a[d])/100;n===nWeeks&&(o=a.join("-"))}else o+=s*resSize;else"PH"===t?(tbody+=td+s+etd,o=""):(tds500=500*s,tds700=700*s,tbody+=td+s+etd,tbodyTmp1+=td+Math.round(tds500)+etd,tbodyTmp2+=td+Math.round(tds700)+etd,o="");if(1===flush.length)for(d=1;d<=nWeeks;d++)n===nWeeks&&(1===z&&r===n&&0!==flush[0]&&(tbody+='<td class="flush" rowspan="'+nProduct+'">'+flushText+etd,tbodyTmp1+='<td class="flush" rowspan="'+nProduct+'">'+flushText+etd,tbodyTmp2+='<td class="flush" rowspan="'+nProduct+'">'+flushText+etd),r++);else 1===flush[n-1]&&(1===z&&(r=0,tbody+='<td class="flush" rowspan="'+nProduct+'">'+flushText+etd,tbodyTmp1+='<td class="flush" rowspan="'+nProduct+'">'+flushText+etd,tbodyTmp2+='<td class="flush" rowspan="'+nProduct+'">'+flushText+etd),r++)}}),""!==o?("string"==typeof o?(o=calString(o,batchesperweek,resSize).join("-"),totalUnit=""):!1===Number.isInteger(o)&&"string"!=typeof o?(o*=batchesperweek)>=1e3?(o=100*Math.round(o/1e3)/100,totalUnit="L"):(o=Math.round(100*o)/100,totalUnit="ml"):(o*=batchesperweek)>=1e3?(o=Math.round(o/1e3*100)/100,totalUnit="L"):totalUnit="ml",tbody+='<td class="rowTotal">'+o+totalUnit+etd):(tbody+='<td class="rowTotal empty">&nbsp;'+etd,"</tr></tr></tr></tr></tr>"!==tbodyTmp1&&(tbodyTmp1+='<td class="rowTotal empty">&nbsp;'+etd,tbodyTmp2+='<td class="rowTotal empty">&nbsp;'+etd)),tbody+=etr,tbodyTmp1+=etr,tbodyTmp2+=etr}),tbody+=tbodyTmp1+=tbodyTmp2,tbody+=etbody,""!==this.chart.grow_footNote?tfoot+=tr+tdfooter+this.chart.grow_footNote+etd+etr+etfoot:tfoot="",table+=thead+tbody+tfoot+etable,document.getElementById("growTableContent").innerHTML=table}},{key:"bloom",value:function bloom(){var nProduct=Object.keys(this.chart.bloom_products[0]).length+2,nWeeks=parseInt(this.bloomweeks),flush=this.chart.bloom_flush,flushAtEnd=0,unit=this.unit,resUnit=this.resUnit,resSize=Number(this.resSize),batchesperweek=this.batches,colspancounter=1,tds500=0,tds700=0,table='<table class="chart bloom" border="1">',thead=thead_reset,tbody=tbody_reset,tbodyTmp1="",tbodyTmp2="",tfoot=tfoot_reset,z=0,resTotal=[0,0],galTotal=[0,0],totalUnit="ml";if(thead+=tr+th+prodBloomStageText+eth,1===flush.length)for(var i=1;i<=nWeeks;i++)colspancounter++,thead+=th+weekText+i+eth,i===nWeeks&&0!==flush[0]&&(colspancounter++,thead+='<th class="flush">&nbsp;'+eth);else $.each(this.chart.bloom_flush,function(t,e){var o=t+1;o<=nWeeks&&(colspancounter++,thead+=th+weekText+o+eth,1===flush[o-1]&&flush.length>1&&(colspancounter++,thead+='<th class="flush">&nbsp;'+eth))});thead+='<th class="rowTotal" style="font-weight:normal">'+theadTotalText1+resSize+spaceText+resUnit+theadTotalText2+batchesperweek+theadTotalText3+eth,thead+=etr,thead+=ethead,tdfooter=colspancounter>1?'<td colspan="'+eval(colspancounter+1)+'">':tdfooter,$.each(this.chart.bloom_products[0],function(t,e){var o=0,r=1,a=[0,0];z++,"E.C."!==t&&"PH"!==t?tbody+=tr+td+t+etd:"E.C."===t?(tbody+='<tr class="phcol">'+td+t+etd,tbodyTmp1='<tr class="phcol">'+td+"T.D.S. 500"+etd,tbodyTmp2='<tr class="phcol">'+td+"T.D.S. 700"+etd):tbody+='<tr class="phcol">'+td+t+etd,$.each(e,function(e,s){var n=e+1;if(n<=nWeeks){var l;if("E.C."!==t&&"PH"!==t)if(unit>0&&(s="string"==typeof s?calString(s.replace(/[a-zA-Z]+/g,""),unit,resSize).join("-"):Math.round(s*unit*resSize*100)/100),"string"==typeof s?(l=calString(s.replace(/[a-zA-Z]+/g,""),resSize).join("-"),totalUnit=""):(l=s*resSize)>=1e3?(l=Math.round(l/1e3*100)/100,totalUnit="L"):(l=Math.round(100*l)/100,totalUnit="ml"),tbody+=td+l+totalUnit+etd,"string"==typeof s){for(var i=s.replace(/[a-zA-Z]+/g,"").split("-"),d=0;d<i.length;d++)i[d]=Number(i[d],10)*resSize,a[d]=i[d]+a[d],a[d]=Math.round(100*a[d])/100;n===nWeeks&&(o=a.join("-"))}else o+=s*resSize;else"PH"===t?(tbody+=td+s+etd,o=""):(tds500=500*s,tds700=700*s,tbody+=td+s+etd,tbodyTmp1+=td+Math.round(tds500)+etd,tbodyTmp2+=td+Math.round(tds700)+etd,o="");if(1===flush.length)for(d=1;d<=nWeeks;d++)n===nWeeks&&(1===z&&r===n&&0!==flush[0]&&(tbody+='<td class="flush" rowspan="'+nProduct+'">'+flushText+etd,tbodyTmp1+='<td class="flush" rowspan="'+nProduct+'">'+flushText+etd,tbodyTmp2+='<td class="flush" rowspan="'+nProduct+'">'+flushText+etd),r++);else 1===flush[n-1]&&(1===z&&(r=0,tbody+='<td class="flush" rowspan="'+nProduct+'">'+flushText+etd,tbodyTmp1+='<td class="flush" rowspan="'+nProduct+'">'+flushText+etd,tbodyTmp2+='<td class="flush" rowspan="'+nProduct+'">'+flushText+etd),r++)}}),""!==o?("string"==typeof o?(o=calString(o.replace(/[a-zA-Z]+/g,""),batchesperweek,resSize).join("-"),totalUnit=""):!1===Number.isInteger(o)&&"string"!=typeof o?(o*=batchesperweek)>=1e3?(o=100*Math.round(o/1e3)/100,totalUnit="L"):(o=Math.round(100*o)/100,totalUnit="ml"):(o*=batchesperweek)>=1e3?(o=Math.round(o/1e3*100)/100,totalUnit="L"):totalUnit="ml",tbody+='<td class="rowTotal">'+o+totalUnit+etd):(tbody+='<td class="rowTotal empty">&nbsp;'+etd,"</tr></tr></tr></tr></tr>"!==tbodyTmp1&&(tbodyTmp1+='<td class="rowTotal empty">&nbsp;'+etd,tbodyTmp2+='<td class="rowTotal empty">&nbsp;'+etd)),tbody+=etr,tbodyTmp1+=etr,tbodyTmp2+=etr}),tbody+=tbodyTmp1+=tbodyTmp2,tbody+=etbody,""!==this.chart.bloom_footNote?tfoot+=tr+tdfooter+this.chart.bloom_footNote+etd+etr+etfoot:tfoot="",table+=thead+tbody+tfoot+etable,document.getElementById("bloomTableContent").innerHTML=table}}]),Chart}();Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t};
